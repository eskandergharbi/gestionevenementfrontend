<div class="p-grid">
  <div class="p-col-12 p-md-4" *ngFor="let task of tasks">
    <div class="p-card p-mb-3">
      <div class="p-card-header">
        <h4>{{ task.title }}</h4>
      </div>
      <div class="p-card-body">
        <p>{{ task.description }}</p>
        <p>Assigned To: {{ task.assignedTo }}</p>
        <p>Project: {{ task.project }}</p>
        <p>Status: {{ task.status | titlecase }}</p>
        <p>Priority: {{ task.priority | titlecase }}</p>
        <div class="p-buttonset p-mt-3">
          <button pButton type="button" label="Delete" class="p-button-danger" (click)="task._id ? deleteTask(task._id) : null"></button>
          <button pButton type="button" label="Details" (click)="viewTaskDetails(task)"></button>
          <button pButton type="button" label="Edit" class="p-button-warning" (click)="editTask(task)"></button>
        </div>
      </div>
    </div>
  </div>
</div>

<p-dialog header="Task Details" [(visible)]="displayDetailsDialog" [modal]="true" [closable]="true" [style]="{ width: '50vw' }">
  <div *ngIf="selectedTask">
    <h4>Title: {{ selectedTask.title }}</h4>
    <p>Description: {{ selectedTask.description }}</p>
    <p>Assigned To: {{ selectedTask.assignedTo }}</p>
    <p>Project: {{ selectedTask.project }}</p>
    <p>Status: {{ selectedTask.status | titlecase }}</p>
    <p>Priority: {{ selectedTask.priority | titlecase }}</p>
  </div>
</p-dialog>

<p-dialog header="Edit Task" [(visible)]="displayEditDialog" [modal]="true" [closable]="true" [style]="{ width: '50vw' }">
  <div *ngIf="editableTask">
    <form #editForm="ngForm">
      <div class="p-field">
        <label for="title">Title</label>
        <input id="title" type="text" [(ngModel)]="editableTask.title" name="title" class="p-inputtext p-component" required />
      </div>
      <div class="p-field">
        <label for="description">Description</label>
        <textarea id="description" [(ngModel)]="editableTask.description" name="description" class="p-inputtext p-component" required></textarea>
      </div>
      <div class="p-field">
        <label for="assignedTo">Assigned To</label>
        <input id="assignedTo" type="text" [(ngModel)]="editableTask.assignedTo" name="assignedTo" class="p-inputtext p-component" required />
      </div>
      <div class="p-field">
        <label for="project">Project</label>
        <input id="project" type="text" [(ngModel)]="editableTask.project" name="project" class="p-inputtext p-component" required />
      </div>
      <div class="p-field">
        <label for="status">Status</label>
        <select id="status" [(ngModel)]="editableTask.status" name="status" class="p-dropdown p-component" required>
          <option value="not started">Not Started</option>
          <option value="in progress">In Progress</option>
          <option value="completed">Completed</option>
        </select>
      </div>
      <div class="p-field">
        <label for="priority">Priority</label>
        <select id="priority" [(ngModel)]="editableTask.priority" name="priority" class="p-dropdown p-component" required>
          <option value="low">Low</option>
          <option value="medium">Medium</option>
          <option value="high">High</option>
        </select>
      </div>
      <div class="p-mt-3">
        <button pButton type="button" label="Save" class="p-button-success" (click)="saveTask(editForm)" [disabled]="!editForm.valid"></button>
        <button pButton type="button" label="Cancel" class="p-button-secondary" (click)="displayEditDialog = false"></button>
      </div>
    </form>
  </div>
</p-dialog>
